{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/R4M0N/Engenharia%20de%20Software/Programa%C3%A7%C3%A3o%20II/projetoprogramacaoii/MediApp/medi-app/src/app/appointment/list/page.tsx"],"sourcesContent":["\"use client\"\r\nimport React, { useEffect, useState } from 'react'; // HOOK = gancho\r\nimport Link from 'next/link';\r\n\r\nexport default function AppointmentList() {\r\n    const [appointments, setAppointments] = useState(new Array());\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [doctors, setDoctors] = useState(new Array());\r\n    const [pacients, setPacients] = useState(new Array());\r\n\r\n    useEffect(() => {\r\n        fetch('http://127.0.0.1:3001/appointments', {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': sessionStorage.getItem(\"token\") || ''\r\n            },\r\n        }).then(response => response.json())\r\n        .then(data => {\r\n            setAppointments(data);\r\n        });\r\n    }, [appointments]);\r\n\r\n    useEffect(() => {\r\n        fetch('http://127.0.0.1:3001/doctors', {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': sessionStorage.getItem(\"token\") || ''\r\n            },\r\n        }).then(response => response.json())\r\n        .then(data => {\r\n            setDoctors(data);\r\n        });\r\n    }, [doctors]);\r\n\r\n    useEffect(() => {\r\n        fetch('http://127.0.0.1:3001/pacients', {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': sessionStorage.getItem(\"token\") || ''\r\n            },\r\n        }).then(response => response.json())\r\n        .then(data => {\r\n            setPacients(data);\r\n        });\r\n    }, [pacients]);\r\n\r\n\r\n    const deleteAppointment = async (id: any) => {\r\n        const add = await fetch(`http://127.0.0.1:3001/appointments/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': sessionStorage.getItem(\"token\") || ''\r\n            },\r\n        });\r\n        const content = await add.json();\r\n\r\n        if (content.date) {\r\n            window.location.reload();\r\n        } else {\r\n            setError(content.error);\r\n        }\r\n    }\r\n\r\n    const findDoctorName = (id: any) => {\r\n        let name;\r\n\r\n        doctors.map((doctor) => {\r\n            if (doctor._id == id){\r\n                name = doctor.name;\r\n            }\r\n        });\r\n        \r\n        return name;\r\n    }\r\n\r\n    const findPacientName = (id: any) => {\r\n        let name;\r\n\r\n        pacients.map((pacient) => {\r\n            if (pacient._id == id){\r\n                name = pacient.name;\r\n            }\r\n        });\r\n        \r\n        return name;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Link className=\"font-medium text-blue-600 dark:text-blue-500 hover:underline\" href=\"/home\">Voltar</Link>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <td className='border border-slate-300'>Date</td>\r\n                        <td className='border border-slate-300 text-center'>Doctor</td>\r\n                        <td className='border border-slate-300 text-center'>Pacient</td>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody className=\"appointments\" id=\"appointments\">\r\n                    {!!appointments && appointments.map((appointment: any) => (\r\n                        <tr>\r\n                            <td className='border border-slate-300'>{appointment.date}</td>\r\n                            <td className='border border-slate-300 text-center'><label>{ findDoctorName(appointment.doctorId) } </label></td>\r\n                            <td className='border border-slate-300 text-center'><label>{ findPacientName(appointment.pacientId) } </label></td>\r\n                            <td className='border border-slate-300 text-center'>\r\n                                <button onClick={(e) => deleteAppointment(appointment._id)} className='bg-red-500 p-2 inline-block text-white text-sm'>Delete</button></td>\r\n                            <td className='border border-slate-300 text-center'>\r\n                                <Link href={`/appointment/edit/${appointment._id}`} className='bg-yellow-500 p-2 inline-block ml-3 text-white text-sm'>Edit</Link>\r\n                            </td>\r\n                            <td className='border border-slate-300 text-center'>\r\n                                <Link className='bg-green-500 p-2 inline-block ml-3 text-white text-sm' href={`/prescription/${appointment._id}/create`}>Create new prescription</Link>\r\n                            </td>\r\n                            <td className='border border-slate-300 text-center'>\r\n                                <Link className='bg-green-500 p-2 inline-block ml-3 text-white text-sm' href=\"/prescription/upload\">Upload prescription</Link>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            <div>\r\n                {error && <div className=\"p-2 text-white border-gray-200 border-[1px] rounded-sm bg-red-400\" style={{ color: 'red' }}>{error}</div>}\r\n            </div>\r\n        </>\r\n    )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}